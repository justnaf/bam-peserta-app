<x-app-layout>
    <x-slot name="header">
        <h2 class="font-semibold text-sm text-gray-800 leading-tight">
            {{ __('Lengkapi Data Diri Dahulu') }}
        </h2>
    </x-slot>

    <div class="py-12">
        <div class="max-w-7xl mx-auto sm:px-6 lg:px-8">
            <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg">
                <div class="p-6 text-gray-900">
                    <div class="flex flex-col items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" width="100" viewBox="0 0 525.30143 609.59458" xmlns:xlink="http://www.w3.org/1999/xlink" role="img" artist="Katerina Limpitsouni" source="https://undraw.co/">
                            <path d="m400.74937,609.15198h-199.55937c-26.00248,0-47.15726-21.1545-47.15726-47.15726V47.15726c0-26.00276,21.15478-47.15726,47.15726-47.15726h199.55937c26.00276,0,47.15726,21.1545,47.15726,47.15726v514.83746c0,26.00276-21.1545,47.15726-47.15726,47.15726Z" fill="#2f2e41" stroke-width="0" />
                            <path d="m400.95274,596.42516h-199.96612c-19.51083,0-35.38405-15.8735-35.38405-35.38405V45.21841c0-19.51054,15.87322-35.38405,35.38405-35.38405h199.96612c19.51054,0,35.38405,15.8735,35.38405,35.38405v515.82271c0,19.51054-15.8735,35.38405-35.38405,35.38405Z" fill="#fff" stroke-width="0" />
                            <path d="m332.20824,43.38689h-63.63411c-7.33651,0-13.30531-5.96852-13.30531-13.30531s5.9688-13.30531,13.30531-13.30531h63.63411c7.33679,0,13.30531,5.96852,13.30531,13.30531s-5.96852,13.30531-13.30531,13.30531Z" fill="#2f2e41" stroke-width="0" />
                            <line x1="525.30143" y1="608.84458" x2=".48324" y2="608.84458" fill="#fff" stroke="#090814" stroke-miterlimit="10" stroke-width="1.5" />
                            <rect x="307.90111" y="439.53768" width="74.9702" height="29.20164" rx="4.64455" ry="4.64455" fill="#fff" stroke-width="0" />
                            <path d="m377.84812,469.55086h-64.92369c-3.21717,0-5.83441-2.61725-5.83441-5.83441v-19.15513c0-3.21717,2.61725-5.83441,5.83441-5.83441h64.92369c3.21717,0,5.83441,2.61725,5.83441,5.83441v19.15513c0,3.21717-2.61725,5.83441-5.83441,5.83441Z" fill="#11946c" stroke-width="0" />
                            <rect x="209.65566" y="439.53768" width="74.9702" height="29.20164" rx="4.64455" ry="4.64455" fill="#fff" stroke="#090814" stroke-miterlimit="10" stroke-width="1.5" />
                            <path d="m279.60266,469.55086h-64.92369c-3.21717,0-5.83441-2.61725-5.83441-5.83441v-19.15513c0-3.21717,2.61725-5.83441,5.83441-5.83441h64.92369c3.21717,0,5.83441,2.61725,5.83441,5.83441v19.15513c0,3.21717-2.61725,5.83441-5.83441,5.83441Z" fill="#dcdcdc" stroke-width="0" />
                            <rect x="212.1214" y="153.35758" width="170.36184" height="170.36184" rx="11.53824" ry="11.53824" fill="#dcdcdc" stroke-width="0" />
                            <path d="m360.50302,245.35552c0,20.40319-13.42278,37.67206-31.92242,43.47968l-2.05755,13.57678-1.53853,10.21146-1.67304,11.09598h-31.55716l-11.74975-9.78797-5.15385-4.28834s2.03854-2.61507,4.74985-6.78886h.01925c1.63477-2.5193,3.53856-5.61513,5.34611-9.07622,1.57702-2.94278,3.11555-6.1541,4.42309-9.46121.1155-.32771.25-.65447.36526-.98124-12.28802-8.1532-20.40319-22.11496-20.40319-37.98005,0-25.1723,20.40319-45.57643,45.57596-45.57643,18.51865,0,34.47998,11.05748,41.59514,26.92256,2.55779,5.69306,3.98082,12.00022,3.98082,18.65387Z" fill="#f0a0a3" stroke-width="0" />
                            <path d="m291.01925,284.73094s-8.6902-43.96803,3.86997-38.73462c12.56017,5.23341,9.19925,14.08049,9.19925,14.08049h0l12.03683-17.79358v-20.41028s7.85011-8.89679,7.85011-8.89679l33.49379,14.13019s17.79358-52.33405-32.97045-35.58716c0,0-43.43727-17.79358-55.99744,13.08351-29.77777,69.55646,22.51793,80.12823,22.51793,80.12823Z" fill="#2f2e43" stroke-width="0" />
                            <path d="m343.34965,323.71941h-84.51776l18.26888-18.67265c.78851-.80753,1.61529-1.51928,2.49981-2.19253h.01925c6.63463-4.98037,15.63456-5.80762,23.15348-1.86482l22.21121,11.63402,18.15339,9.51943.21174,1.57656Z" fill="#2f2e43" stroke-width="0" />
                            <path d="m348.02251,323.71941h-29.74938c-5.63461-3.53809-11.94201-7.46117-18.38438-11.40303-2.30755-1.40472-4.82685-2.03854-7.46117-2.03854-3.92308,0-8.15391,1.38406-12.423,3.65359-4.61534,2.46108-9.2882,5.94189-13.71129,9.78797h-35.57625l.82678-1.57656-2.34605-4.42356c-4.65361-8.80767,3.36532-18.38344,16.55758-19.76844l39.21058-4.17285,7.65366-.80753c12.92277-1.36622,25.84578,2.24981,33.90344,9.44149.11526.09672.23052.21221.34602.30799l18.99965,17.48014c1.15378,1.05824,1.86529,2.26953,2.1538,3.51931Z" fill="#11946c" stroke-width="0" />
                            <path d="m182.74117,331.8867l-13.71209-27.02141-15.7769,8.00603,13.71209,27.02141c-1.46454,4.25806-1.13974,9.48293,1.30305,14.29676,4.27425,8.42295,13.38999,12.38348,20.36069,8.84618,6.9707-3.5373,9.15661-13.23288,4.88236-21.65583-2.44279-4.81383-6.46801-8.16091-10.76919-9.49314Z" fill="#f0a0a3" stroke-width="0" />
                            <polyline points="89.68013 209.71501 158.9527 339.18741 186.038 324.69576 125.35502 192.0334" fill="#11946c" stroke-width="0" />
                            <path d="m127.52047,240.05731l18.8803,87.68969-82.28507,2.87041s10.7806-60.8992,6.95339-71.42404l56.45138-19.13606Z" fill="#f0a0a3" stroke-width="0" />
                            <rect x="143.2411" y="566.37324" width="19.2284" height="25.34342" transform="translate(305.71061 1158.0899) rotate(-180)" fill="#f0a0a3" stroke-width="0" />
                            <path d="m139.34801,606.72337c-1.64471-1.33142-2.53252-2.81814-2.63862-4.41903-.12143-1.83111.7948-3.79575,2.72281-5.83935.04628-.58806.64466-7.87383,1.9781-9.17848-.11178-.39-.79099-2.97553.32241-4.6544.52451-.79084,1.36993-1.25179,2.51285-1.37008l.0498-.00508.02467.04352c.03223.0569,3.27692,5.69295,8.15773,6.18778,2.79825.28368,5.59986-1.15601,8.32708-4.28026.09802-.23081.8686-4.03613,1.36596-6.55497l.01989-.10071,26.5941,13.97853,15.54525,4.30149c1.9538.54066,3.31835,2.33408,3.31835,4.36131,0,1.7286-1.0067,3.32949-2.56467,4.07838l-7.53508,3.62206c-3.14851,1.51348-6.65923,2.31344-10.15269,2.31344h-40.8729c-2.64811,0-5.19626-.88221-7.17503-2.48414Z" fill="#2f2e43" stroke-width="0" />
                            <rect x="12.50048" y="556.9959" width="19.2284" height="25.34342" transform="translate(-115.77589 1122.83706) rotate(-163.77981)" fill="#f0a0a3" stroke-width="0" />
                            <path d="m1.41364,592.47131c-1.20733-1.73784-1.64452-3.41337-1.29922-4.98017.39489-1.79214,1.82343-3.42265,4.24553-4.84636.2087-.55173,2.81839-7.38034,4.46319-8.26059.00161-.4057.07165-3.07803,1.60968-4.37908.72453-.61285,1.66506-.8193,2.79553-.61363l.04923.00903.01154.04868c.01505.06364,1.55628,6.38169,6.10458,8.22017,2.60763,1.05402,5.69987.45421,9.19123-1.78388.15859-.19425,1.96143-3.63285,3.14259-5.9125l.04723-.09115,21.63091,20.85064,13.72495,8.47252c1.72501,1.06489,2.53428,3.16808,1.96802,5.11462-.48285,1.65979-1.89665,2.91576-3.60179,3.19965l-8.2469,1.37311c-3.44594.57377-7.04038.36124-10.39478-.61459l-39.24597-11.41701c-2.5427-.7397-4.743-2.29856-6.19554-4.38946Z" fill="#2f2e43" stroke-width="0" />
                            <path d="m55.2272,286.02992l82.28507,1.91361s50.00211,144.13389,48.0885,280.95674h-68.64177s-4.07527-158.82932-4.07527-158.82932l-11.92321,164.99442-90.45472-5.20829,44.7214-283.82715Z" fill="#2f2e43" stroke-width="0" />
                            <path d="m133.928,125.05106c0-17.26439-13.99558-31.25997-31.26003-31.25997-17.26439,0-31.25997,13.99558-31.25997,31.25997,0,10.8813,5.5627,20.46008,13.9964,26.05864-3.56886,9.55986-10.22589,18.03899-10.22589,18.03899l30.8068,25.67262,6.04344-39.93754c12.69113-3.97823,21.89925-15.82942,21.89925-29.83271Z" fill="#f0a0a3" stroke-width="0" />
                            <path d="m111.95586,169.87448l-35.40172-8.61123-22.69241,29.05529c-5.40541,11.02704-6.25842,23.73728-2.37494,35.38771l18.8168,56.45039s57.40819-.9568,69.84663-34.44491l3.56585-7.42885c4.87409-10.15435,3.76851-22.16645-2.87717-31.26054l-28.88304-39.14786Z" fill="#11946c" stroke-width="0" />
                            <path d="m74.2735,356.50607l.65722-30.29433-17.68785-.38373-.65722,30.29433c-3.3001,3.06354-5.47858,7.82368-5.59567,13.22058-.20486,9.44316,5.96433,17.23569,13.77934,17.40524,7.81501.16954,14.31635-7.34811,14.52122-16.79127.11708-5.3969-1.85305-10.24704-5.01704-13.45082Z" fill="#f0a0a3" stroke-width="0" />
                            <polyline points="49.85437 204.88159 49.85437 351.72093 80.57278 351.72093 89.65136 206.12111" fill="#11946c" stroke-width="0" />
                            <path d="m86.18118,129.67411s24.62193-8.16858,18.5525-17.44132c0,0,26.13225,4.55207,26.80663,0,.67438-4.55207,0-33.71904-35.40499-28.99837-35.40499,4.72067-30.68432,34.39342-30.68432,34.39342,0,0,2.58477,28.68351,21.63603,34.58434,0,0-14.73066-28.4389-.90585-22.53807Z" fill="#2f2e43" stroke-width="0" />
                            <path d="m78.4206,99.99157s-7.27032-5.25079-15.75237-3.63516c-2.96872.56547-6.11061,2.73899-8.94078,5.32566-5.69714,5.20697-9.92445,11.80647-12.67538,19.01774-7.41406,19.43514-22.97374,68.04808,4.24817,74.00791,34.13013,7.47228,36.25064-64.72607,36.25064-64.72607l-3.13028-29.99008Z" fill="#2f2e43" stroke-width="0" /></svg>
                        <p class="mt-2 font-bold">Lengkapi Dulu Ya Data Dirinya</p>
                    </div>
                    <form action="{{route('profile.completation.store')}}" method="POST" enctype="multipart/form-data" x-data="submitForm">
                        @csrf
                        <div x-data="{ step: 1 }" class="w-full max-w-lg mx-auto mt-8">
                            <div x-show="step === 1">
                                <div class="w-full mb-6 ">
                                    <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2" for="name">
                                        Nama Lengkap
                                    </label>
                                    <input class="appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white" name="name" id="name" type="text">
                                    <x-input-error :messages="$errors->get('name')" class="mt-2" />
                                </div>
                                <div class="w-full mb-6">
                                    <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2" for="address">
                                        Alamat Tempat Tinggal
                                    </label>
                                    <textarea class="appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white" name="address" id="address" type="text"></textarea>
                                    <x-input-error :messages="$errors->get('address')" class="mt-2" />
                                </div>
                                <button type="button" @click="step = 2" class="bg-emerald-500 p-2 rounded-md text-white font-bold">Selanjutnya Yuk</button>
                            </div>
                            <div x-show="step === 2">
                                <div class="w-full mb-6">
                                    <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2" for="gender">
                                        Kamu Lanang Apa Wedok?
                                    </label>
                                    <select class="block appearance-none w-full bg-gray-200 border border-gray-200 text-gray-700 py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-gray-500" id="gender" name="gender">
                                        <option selected>Tersedia 2 Pilihan</option>
                                        <option value="laki-laki">Laki - Laki</option>
                                        <option value="perempuan">Perempuan</option>
                                    </select>
                                    <x-input-error :messages="$errors->get('gender')" class="mt-2" />
                                </div>
                                <div class="w-full mb-6">
                                    <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2" for="phone_number">
                                        Kosong Delapan Berapa?
                                    </label>
                                    <input class="appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white" name="phone_number" id="phone_number" type="numeric">
                                    <x-input-error :messages="$errors->get('phone_number')" class="mt-2" />
                                </div>
                                <button type="button" @click="step = 1" class="bg-blue-700 p-2 rounded-md text-white font-bold">Eits Bentar</button>
                                <button type="button" @click="step = 3" class="bg-emerald-500 p-2 rounded-md text-white font-bold">Selanjutnya Yuk</button>
                            </div>
                            <div x-show="step === 3">
                                <div class="w-full mb-6">
                                    <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2" for="birth_date">
                                        Ultah Kapan Nich?
                                    </label>
                                    <input class="appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white" name="birth_date" id="birt_date" type="date">
                                    <x-input-error :messages="$errors->get('birth_date')" class="mt-2" />
                                </div>
                                <div class="w-full mb-6">
                                    <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2" for="birth_place">
                                        Lahir Dimana Lau?
                                    </label>
                                    <input class="appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white" name="birth_place" id="birt_place" type="text">
                                    <x-input-error :messages="$errors->get('birth_place')" class="mt-2" />
                                </div>
                                <button type="button" @click="step = 2" class="bg-blue-700 p-2 rounded-md text-white font-bold">Eits Bentar</button>
                                <button type="button" @click="step = 4" class="bg-emerald-500 p-2 rounded-md text-white font-bold">Selanjutnya Yuk</button>
                            </div>
                            <div x-show="step === 4">
                                <div class="w-full mb-6">
                                    <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2" for="birth_place">
                                        Pastikan Foto Kamu Tamvan dan Cantek.
                                    </label>
                                    <p class="font-normal text-sm text-red-500">*Ukurannya maks. 2Mb Yak</p>
                                    <div x-data="UploadProfileHandler()" class="flex items-center justify-center w-full">
                                        <template x-if="!profile">
                                            <label for="dropzone-file-profile" class="flex flex-col items-center justify-center w-full h-64 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:border-gray-600 dark:hover:border-gray-500 dark:hover:bg-gray-600">
                                                <div class="flex flex-col items-center justify-center pt-5 pb-6">
                                                    <svg class="w-8 h-8 mb-4 text-gray-500 dark:text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 16">
                                                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2" />
                                                    </svg>
                                                    <p class="mb-2 text-sm text-gray-500 dark:text-gray-400">
                                                        <span class="font-semibold">Click to upload</span> or drag and drop
                                                    </p>
                                                    <p class="text-xs text-gray-500 dark:text-gray-400">JPG or JPEG (MAX. 5000x5000px)</p>
                                                </div>
                                            </label>
                                        </template>
                                        <input id="dropzone-file-profile" hidden type="file" @change="handleFileUpload" name="profile" accept="image/jpeg, image/jpg, image/png" />
                                        <!-- Preview Section -->
                                        <template x-if="profile">
                                            <div class="mt-1">
                                                <p class="text-sm text-gray-500 dark:text-gray-400">Selected file:</p>
                                                <p class="text-gray-800 dark:text-white font-semibold" x-text="profile.name"></p>
                                                <button @click="removeFile" class="mt-2 text-red-500 hover:text-white border border-red-500 hover:bg-red-600 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-4 py-2">
                                                    Remove File
                                                </button>
                                            </div>
                                        </template>
                                    </div>
                                    <x-input-error :messages="$errors->get('profile_pic')" class="mt-2" />
                                </div>
                                <button type="button" @click="step = 3" class="bg-blue-700 p-2 rounded-md text-white font-bold">Eits Bentar</button>
                                <button type="submit" class="bg-emerald-500 p-2 rounded-md text-white font-bold">Simpan</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    @push('addedScript')
    <script>
        function UploadProfileHandler() {
            return {
                profile: null
                , handleFileUpload(event) {
                    this.profile = event.target.files[0];
                    // Set file pada input hidden
                    const inputElement = document.getElementById('dropzone-file-profile');
                    inputElement.files = event.target.files;
                }
                , removeFile() {
                    this.profile = null;
                    const inputElement = document.getElementById('dropzone-file-profile');
                    inputElement.value = ''; // Reset file input
                }
            };
        }

        function submitForm() {
            return {
                confirmSimpan() {
                    Swal.fire({
                        title: 'Yakin?'
                        , text: "Sudah Yakin Dengan Data Yang Di Inputkan!"
                        , icon: 'warning'
                        , showCancelButton: true
                        , confirmButtonColor: '#d33'
                        , cancelButtonColor: '#3085d6'
                        , confirmButtonText: 'Yes'
                        , cancelButtonText: 'Cancel'
                    , }).then((result) => {
                        if (result.isConfirmed) {
                            // Explicitly reference the form element and submit it
                            this.$refs.seForm.submit();
                        }
                    });
                }
            , };
        }

        function alerta(massage, icon = 'success') {
            Swal.fire({
                title: icon === 'success' ? 'Success!' : 'Error!'
                , [icon === 'error' ? 'html' : 'text']: massage
                , icon: icon
            , });

        }

    </script>

    @if(session('success'))
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            alerta('{{ session('success') }}', 'success');
        });

    </script>
    @endif

    @if($errors->any())
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            let errorMessage = '';
            @foreach($errors->all() as $error)
            errorMessage += '<li>{{ $error }}</li>';
            @endforeach

            alerta('<ul>' + errorMessage + '</ul>', 'error');
        });

    </script>
    @endif


    @endpush
</x-app-layout>
